# Migration `20201030143628-mark-project-as-required-in-page-and-page-as-required-in-comment`

This migration has been generated by Devrsi0n at 10/30/2020, 10:36:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Comment" ALTER COLUMN "pageId" SET NOT NULL

ALTER TABLE "public"."Page" ALTER COLUMN "projectId" SET NOT NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201025092053-add-page-and-comment-model..20201030143628-mark-project-as-required-in-page-and-page-as-required-in-comment
--- datamodel.dml
+++ datamodel.dml
@@ -2,14 +2,14 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider        = "prisma-client-js"
-  previewFeatures = ["atomicNumberOperations", "connectOrCreate", "transactionApi"]
+  previewFeatures = ["connectOrCreate", "transactionApi"]
 }
 model User {
   id           String    @id @default(cuid())
@@ -71,10 +71,10 @@
   // Embedded page's url, should not include query parameter. e.g. /post?id=123
   url       String
   title     String
   comments  Comment[]
-  project   Project?  @relation(fields: [projectId], references: [id])
-  projectId String?
+  project   Project   @relation(fields: [projectId], references: [id])
+  projectId String
 }
 model Comment {
   id        String   @id @default(cuid())
@@ -85,10 +85,10 @@
   userId  String
   // User input: markdown or rich text format
   content String
-  page   Page?   @relation(fields: [pageId], references: [id])
-  pageId String?
+  page   Page   @relation(fields: [pageId], references: [id])
+  pageId String
   replies   Comment[] @relation("RepliesToComment")
   comment   Comment?  @relation("RepliesToComment", fields: [commentId], references: [id])
   commentId String?
```
