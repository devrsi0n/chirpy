query allProjects {
  projects {
    id
  }
}

query themeProjectByPk($id: uuid!) {
  projectByPk(id: $id) {
    id
    name
    theme
  }
}

query projectByPk($id: uuid!) {
  projectByPk(id: $id) {
    id
  }
}

query projectAnalytics(
  $projectId: uuid!
  $today: timestamptz!
  $yesterday: timestamptz!
  $twoDaysAgo: timestamptz!
) {
  projectByPk(id: $projectId) {
    id
    name
    domain
    sessionsYesterday: anonymousSession {
      events(where: { type: { _eq: "pageview" }, created_at: { _gte: $yesterday, _lt: $today } }) {
        created_at
      }
    }
    sessionsTwoDaysAgo: anonymousSession {
      events(
        where: { type: { _eq: "pageview" }, created_at: { _gte: $twoDaysAgo, _lt: $yesterday } }
      ) {
        created_at
      }
    }
  }
}
