fragment commentContent on Comment {
  id
  content
  comment: content(path: "content")
  createdAt
  deletedAt
  parentId
  pageId
  user {
    id
    name
    avatar
  }
  likes {
    id
    userId
  }
}

query comments {
  comments {
    id
  }
}

query commentList {
  comments(order_by: { createdAt: asc }) {
    ...commentContent
    replies(order_by: { likes_aggregate: { count: desc }, createdAt: asc }) {
      ...commentContent
      replies(order_by: { likes_aggregate: { count: desc }, createdAt: asc }) {
        ...commentContent
      }
    }
  }
}
