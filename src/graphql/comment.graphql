mutation createOneComment($pageId: String!, $content: Json!, $userId: String!) {
  createOneComment(data: { content: $content, page: { connect: { id: $pageId }}, user: { connect: { id: $userId }}}) {
    id
    content
    createdAt
  }
}

# Query one level replies currently.
# For nested query: https://hashinteractive.com/blog/graphql-recursive-query-with-fragments/
query getAllCommentsByPage($pageId: String!) {
  getAllCommentsByPage(pageId: $pageId ) {
    id
    content
    createdAt
    user {
      id
      avatar
      name
    }
    replies {
      id
      content
      createdAt
      user {
        id
        avatar
        name
      }
    }
    likes {
      id
      userId
      commentId
    }
  }
}
